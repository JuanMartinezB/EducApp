<app-navbar></app-navbar>

<div class="p-8 max-w-7xl mx-auto">
  <h1 class="text-3xl font-bold mb-2 text-gray-800">Gestión de Inscripciones</h1>
  <p class="mb-6 text-xl text-blue-600">Bienvenido, {{ studentName }}</p>

  <div class="mb-8 p-6 bg-white rounded-xl shadow-lg">
    <h2 class="text-xl font-semibold mb-4 text-blue-600">Inscribir Nueva Asignatura</h2>
    <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
      
      <select 
        [(ngModel)]="selectedAsignaturaId"
        class="grow px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
        <option [ngValue]="null" disabled>Selecciona una Asignatura...</option>
        <option *ngFor="let asig of asignaturasDisponibles" [ngValue]="asig.id">
          {{ asig.nombre }} (Cód: {{ asig.codigo }}) - Cupos: {{ asig.cupoMaximo - asig.cupoActual }}
        </option>
      </select>
      
      <button 
        (click)="inscribir()"
        [disabled]="!selectedAsignaturaId"
        class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-150 disabled:opacity-50">
        Inscribir
      </button>
    </div>
  </div>

  <div class="p-6 bg-white rounded-xl shadow-lg">
    <h2 class="text-xl font-semibold mb-4 text-blue-600">Asignaturas Activas</h2>
    
    <div *ngIf="asignaturasInscritas.length === 0" class="text-gray-500 p-4 border rounded-lg bg-gray-50">No tienes asignaturas activas inscritas.</div>

        <div class="w-full" *ngIf="asignaturasInscritas.length > 0"> 
      
            <table class="w-full divide-y divide-gray-200 table-auto"> 
        <thead class="bg-white">
          <tr>
                          <th class="px-3 py-3 w-1/12 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID Inscripción</th>
            <th class="px-3 py-3 w-4/12 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Asignatura</th>
            <th class="px-3 py-3 w-1/12 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Créditos</th>
            <th class="px-3 py-3 w-3/12 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Horario</th>
            <th class="px-3 py-3 w-1/12 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acción</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <tr *ngFor="let ins of asignaturasInscritas">
                          <td class="px-3 py-3 text-sm text-gray-900">{{ ins.idInscripcion }}</td>
            <td class="px-3 py-3 text-sm text-gray-900">{{ ins.asignatura.nombre }}</td>
            <td class="px-3 py-3 text-sm text-gray-900">{{ ins.asignatura.creditos }}</td>
            <td class="px-3 py-3 text-sm text-gray-900">{{ ins.asignatura.horario || 'N/A' }}</td>
            <td class="px-3 py-3 text-sm font-medium">
              <button 
                (click)="cancelar(ins.idInscripcion, ins.asignatura.nombre || 'esta asignatura')"
                class="text-red-600 hover:text-red-900 font-semibold">
                Cancelar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>